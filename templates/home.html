{% extends "layout.html" %}
{% block content %}


<!-- Content here -->
<nav class="bg-gray-800">
    <div class="mx-auto px-2 px-10">
        <div class="relative flex items-center justify-between h-20">
            <div class="mr-auto">
                <span class="font-mono text-white">seller.json analytics</span>
            </div>

            <div class="flex">
                <form method="POST" action="" class="mr-3">
                    {{ form.hidden_tag() }}
                    <div class="flex flex-wrap space-y-4 sm:space-y-0 sm:space-x-4 text-center">
                        <div class="">{{ form.sellers_json_url(class="form-input w-full sm:w-auto flex-none bg-gray-50 text-gray-400 hover:text-gray-900 font-mono leading-6 py-2 sm:px-5 border border-gray-200 rounded-xl flex items-center justify-center space-x-2 sm:space-x-4 ffocus:ring-2 focus:ring-blue-600 focus:outline-none transition-colors duration-200")}}</div>
                        <button class="ml-3 capitalize w-full sm:w-auto flex-none bg-blue-500 hover:bg-blue-700 text-white text-lg leading-6 font-semibold py-2 px-5 border border-transparent rounded-xl focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-gray-900 focus:outline-none transition-colors duration-200">{{ form.submit(class="capitalize bg-blue-500 hover:bg-blue-700")}}</button>
                    </div>
                </form>
                <a href="{{ url_for('download_file') }}" target="_blank">
                    <button class="mr-3 capitalize w-full sm:w-auto flex-none bg-green-500 hover:bg-green-700 text-white text-lg leading-6 font-semibold py-2 px-5 border border-transparent rounded-xl focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-gray-900 focus:outline-none transition-colors duration-200">Download Data</button>
                </a>
            </div>
        </div>
    </div>
</nav>


<!-- Totals -->
<div class="flex flex-column">
    <div class="flex flex-column flex-grow">
        <div id="info-block" class="count-box flex flex-grow items-center px-10">
            <div class="flex mr-auto">
                <div class="mr-5 stat-box">
                    <h2 class="stat-box-count font-bold">{{total_entries}}</h2>
                    <p class="uppercase font-bold">total enteries</p>
                </div>
                <div class="mr-5 stat-box">
                    <h2 class="stat-box-count font-bold">{{vdc}}</h2>
                    <p class="uppercase font-bold">valid enteries</p>
                </div>
                <div class="stat-box">
                    <h2 class="stat-box-count font-bold">{{nvdc}}</h2>
                    <p class="uppercase font-bold">missing domains</p>
                </div>
            </div>

            <div class="text-right">
                <p class="font-mono contact-info">{{ contact_info.email }}</p>
                <p class="font-mono contact-info">{{ contact_info.address }}</p>
                <p class="font-mono contact-info">version: {{contact_info.version }}</p>
            </div>
        </div>
    </div>
</div>

<!-- Stat Count Boxes -->
<div class="flex flex-col md:flex-row ">
    <div class="flex-grow">
        <div id="publisher-count" class="count-box flex items-center px-10">
            <div>
                <h2 class="count-title uppercase ">publisher entries</h2>
                <span class="count font-bold">{{publisher}}</span>
            </div>
        </div>
    </div>
    <div class="flex-grow">
        <div id="intermediary-count" class="count-box flex items-center px-10">
            <div>
                <h2 class="count-title uppercase ">intermediary entries</h2>
                <span class="count font-bold">{{intermediary}}</span>
            </div>
        </div>
    </div>
    <div class="flex-grow">
        <div id="both-count" class="count-box flex items-center px-10">
            <div>
                <h2 class="count-title uppercase ">both entries</h2>
                <span class="count font-bold">{{both_count}}</span>
            </div>
        </div>
    </div>
</div>


<!-- Domain Stats -->
<div id="domain-stats" class="flex flex-column flex-grow px-10 count-box h-100">
    <div  class="flex items-center">
        <div>
            {% if error != "" %}
                <p class="domain-stat-count">{{ error }}</p>
            {% else %}
                <p class="domain-stat-count">{{ matched_enteries }}</p>
                <p class="domain-stat-count"><strong>{{pub_pct}}%</strong> of the domains are listed as "<strong>PUBLISHER</strong>"</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}
